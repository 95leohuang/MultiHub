<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src * data: blob:; connect-src *; frame-src *;">
  <title>Multi Hub</title>
  <link rel="stylesheet" href="tabs.css">
</head>

<body>
  <!-- Webview 容器（使用延遲載入優化效能） -->
  <div id="webview-container">
    <webview id="messenger-webview" src="https://www.messenger.com" class="webview active" partition="persist:messenger"
      allowpopups></webview>
    <webview id="chatgpt-webview" data-src="https://chatgpt.com" class="webview" partition="persist:chatgpt" allowpopups
      useragent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36">
    </webview>
    <webview id="gemini-webview" data-src="https://gemini.google.com" class="webview" allowpopups
      preload="./webview-preload.js">
    </webview>
    <div id="git-updater-ui" class="webview">
      <!-- Git Updater UI will be injected here -->
    </div>
    <webview id="discord-webview" data-src="https://discord.com/app" class="webview" partition="persist:discord"
      allowpopups>
    </webview>
    <webview id="telegram-webview" data-src="https://web.telegram.org" class="webview" partition="persist:telegram"
      allowpopups>
    </webview>
  </div>

  <!-- Floating Dock 按鈕 -->
  <button id="dock-trigger" title="切換平台 (Alt+1~6)">
    <img id="dock-favicon" src="https://static.xx.fbcdn.net/rsrc.php/yO/r/qa11ER6rke_.ico" alt="">
  </button>

  <!-- Grid Popup -->
  <div id="grid-popup" class="hidden">
    <div class="popup-header">
      <span>切換平台</span>
      <div class="header-actions">
        <span class="shortcut-hint">Alt+1~6</span>
        <button id="shortcut-settings-btn" title="設定快捷鍵">⚙️</button>
      </div>
    </div>
    <div class="popup-grid">
      <!-- 會由 JS 動態生成 (renderPlatformGrid) -->
    </div>
  </div>

  <!-- 快捷鍵設定 Modal -->
  <div id="settings-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>快捷鍵偏好設定</h3>
        <button id="close-settings" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <p class="settings-desc">你可以為每個數字 (Alt+1~6) 分配一個或多個平台。若分配多個，重複按下快捷鍵將會輪播切換。</p>
        <div id="shortcut-config-list">
          <!-- 會由 JS 動態生成 -->
        </div>
      </div>
      <div class="modal-footer">
        <button id="reset-shortcuts" class="git-btn secondary">恢復預設</button>
        <button id="save-shortcuts" class="git-btn">儲存設定</button>
      </div>
    </div>
  </div>

  <script src="tabs.js"></script>
  <script src="git-updater-ui.js"></script>
</body>

</html>